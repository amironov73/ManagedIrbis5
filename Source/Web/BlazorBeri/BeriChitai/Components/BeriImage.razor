@using AM
@inject IConfiguration _configuration


<img src="@DataSrc()" alt="Обложка"/>

@code
{
    /// <summary>
    /// Номер картинки.
    /// </summary>
    [Parameter]
    public string? Number { get; set; }

    private string? _path;

    private string DataSrc()
    {
        _path ??= _configuration["image-path"];
        var fileName = Number.ThrowIfNull();
        if (!fileName.Contains ('.'))
        {
            fileName += ".jpg";
        }

        fileName = Path.Combine (_path, fileName);
        if (!File.Exists (fileName))
        {
            return "img/nocover.png";
        }

        var bytes = File.ReadAllBytes (fileName);
        var base64 = Convert.ToBase64String (bytes);
        var result = "data:image/jpeg;base64," +  base64;

        return result;
    }
}
