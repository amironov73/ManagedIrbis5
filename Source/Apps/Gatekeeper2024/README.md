### Gatekeeper

Регистрация прохода читателей в библиотеку через турникеты системы Sigur, оформленная в виде Web-приложения.

На входе в ИОГУНБ установлены турникеты, управляемые СКУД Sigur. Эта система позволяет делегировать решение о входе/выходе посетителя по протоколу WebDel, представляющему собой REST-запрос по указанному адресу.

В качестве идентифицирующего признака для посетителей ИОГУНБ выступает уникальный идентификатор бесконтактных карт Mifare Classic, применяемых в ИОГУНБ в качестве читательских билетов. Кроме того, читатели могут предъявлять оптическому считывателю экран своего смартфона с открытым приложением Wallet, в котором хранится виртуальная версия читательского билета (на экран в этот момент выводится штрих-код с номером читательского билета).

Gatekeeper поделен на два компонента: API-сервис, принимающий запросы от Sigur, и веб-страница, выводящая текущую информацию о входящих и выходящих читателях в режиме, близком к реальному времени.

API-сервис запускается автоматически при старте Windows, что обеспечивается соответствующей записью в библиотеке системного Планировщика задач. Сервис принимает REST-запросы от Sigur и обращается с запросом к базе данных RDR сервера ИРБИС64. Ищется запись с номером читательского билета, предъявленным на турникете. Если такая запись найдена и на читателя не наложены ограничения, выдается положительный ответ, турникет открывается, и читатель проходит в библиотеку. В противном случае (запись не найдена или на читателя наложены ограничения в обслуживании) выдается отрицательный ответ, на монитор выводится соответствующее сообщение, и дежурный библиотекарь должен принять решение о допуске читателя в библиотеку.

Веб-страница регулярно запрашивает текущее состояние у сервиса и отображает полученную информацию, в частности, сообщение о необходимости принять решение о проходе читателя.
